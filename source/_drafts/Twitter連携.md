---
title: Twitter連携
date: 2020-10-02
categories: 機能
---

Twitterに対し、公開[キュア！](/articles/キュア！)のツイート（マルチポスト）を行います。
__現在、Twitter側から凍結されています。__ 復旧の見込みがなく、廃止も検討しています。

## 機能

### ツイートの対象となるキュア！

以下の条件を満たす[キュア！](/articles/キュア！)だけがツイートされます。

- **公開の範囲が「公開」であること。** 「未収載」以下は対象にならない。
  - コマンドトゥートは自動的に「ダイレクト」になる為、対象に含まない。
- **ブーストではないこと。** ブーストはあなたの[キュア！](/articles/キュア！)ではないから。
- **メンションではないこと。** キュアスタ！の宛先とTwitterの宛先は、同じアカウント名でも別人の可能性があるから。

### ツイートされる内容

- 末尾にハッシュタグを加える。 `#precure` と `#キュアスタ` 。
  - [実況](/articles/実況)中は、更に `#実況` タグ追加。
  - 通常の自動のハッシュタグは、ツイートには加えない。字数が増えすぎるので。
  - 「キュアスタ！」と、「！」で終わるのが本来の表記。ハッシュタグは約物を含むことができないので仕方なく。
- 末尾にその[キュア！](/articles/キュア！)へのリンクを加える。
- よく知られている様にツイートは140文字なので、収まる様に必要に応じて詰める。
  - 半角文字は0.5文字換算。
  - 本文中のURLは`t.co`の23文字からなる短縮URLに置き換えられる為、一律12文字換算。
- CW（コンテンツワーニング）指定の[キュア！](/articles/キュア！)は、本文ではなく見出し文がツイートの対象になる。

## 設定の手順

### モロヘイヤHOME

- [HOME](https://precure.ml/mulukhiya)を開く。
- その端末で初めて[HOME](https://precure.ml/mulukhiya)を利用する場合は、[トークンの登録](https://precure.ml/mulukhiya/app/auth)（アプリケーションの認証）を最初に行うこと。

### 環境設定画面

- トークンが登録済みの場合は、[環境設定](https://precure.ml/mulukhiya/app/config)画面へ。
- `Sign in with Twitter`ボタンをクリック。
- 「現在の設定」にTwitter関連の設定が加わったことを確認し、設定終了。

![操作](操作.png)

## 技術的な詳細
https://github.com/pooza/mulukhiya-toot-proxy/wiki/TweetHandler
