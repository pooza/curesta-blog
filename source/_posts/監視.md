---
title: 監視
categories: インフラ
---

[Sensu](https://sensu.io/)を使用。プラグインは全て自作。（非公開）
メンバー向けに、[UptimeRobot](https://uptime.precure.ml/)によるものも提供しています。

## handlers
- Discord通知

## checks

### 5分ごと
- Mastodonフロントへの接続性（precure.ml:443）
- mastodon-webへの接続性（localhost:3000）
- mastodon-streamingへの接続性（localhost:4000）
- モロヘイヤへの接続性、レスポンスの妥当性（localhost:3008）
- PostgreSQLへの接続性
- Redisへの接続性
- Sidekiqのキューイングタスク数
- `god`プロセスの生存
- sshへの接続性
- ロードアベレージ
- スワップ残量

### 1時間ごと
- ImageMagick（`magick`）コマンドの正常実行
- `ffmpeg`コマンドの正常実行
- ZFSの正常性、容量
- SMTPへの接続性

### 6時間ごと
- TLS証明書の期限
