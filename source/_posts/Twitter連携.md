---
title: Twitter連携
categories: 機能
---

Twitterに対し、公開キュア！のツイート（マルチポスト）を行います。

## 機能

### ツイートの対象となるキュア！

以下の条件を満たすキュア！だけがツイートされます。

- **公開の範囲が「公開」であること。** 「未収載」以下は対象にならない。
  - コマンドトゥートは自動的に「ダイレクト」になる為、対象に含まない。
- **ブーストではないこと。** ブーストはあなたのキュア！ではないから。
- **メンションではないこと。** キュアスタ！の宛先とTwitterの宛先は、同じアカウント名でも別人の可能性があるから。

### ツイートされる内容

- 末尾にハッシュタグを加える。 `#precure` と `#キュアスタ` 。
  - 通常の自動のハッシュタグは、ツイートには加えない。字数が増えすぎるので。
  - 「キュアスタ！」と、「！」で終わるのが本来の表記。ハッシュタグは約物を含むことができないので仕方なく。
- 末尾にそのキュア！へのリンクを加える。
- よく知られている様にツイートは140文字なので、収まる様に必要に応じて詰める。
  - 半角文字は0.5文字換算。
  - 本文中のURLは`t.co`の23文字からなる短縮URLに置き換えられる為、一律12文字換算。
- CW（コンテンツワーニング）指定のキュア！は、本文ではなく見出し文がツイートの対象になる。

## 設定の手順

### モロヘイヤHOME

- [HOME](https://precure.ml/mulukhiya)を開く。
- その端末で初めて[HOME](https://precure.ml/mulukhiya)を利用する場合は、[トークンの登録](https://precure.ml/mulukhiya/app/auth)（アプリケーションの認証）を最初に行うこと。

### 環境設定画面

- トークンが登録済みの場合は、[環境設定](https://precure.ml/mulukhiya/app/config)画面へ。
- `Sign in with Twitter`ボタンをクリック。
- 「現在の設定」にTwitter関連の設定が加わったことを確認し、設定終了。

![スクリーンショット 2020-06-05 21.36.44.png](/attachment/5eda3d44298708058344742d)

## 管理人・開発者むけの説明
https://github.com/pooza/mulukhiya-toot-proxy/wiki/TweetHandler
